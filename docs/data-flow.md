# Data Flow

> Auto-generated by `node scripts/generate-docs.js` on 2026-02-10
> Do not edit manually — regenerate from source.

Maps every JSON artifact and data structure to its producer and consumer modules.
Combines static analysis (file I/O detection) with require-graph tracing.

---

### animation-detector.js (751 lines)

**Exports:** `getPreNavigationScript()`, `setupNetworkInterception()`, `getMutationObserverScript()`, `extractAnimationData()`, `analyzeAnimationEvidence()`, `groupAnimationsBySection()`
**Required by:** `extract-reference.js`, `test-animation-detector.js`, `url-to-preset.js`

---

### animation-injector.js (957 lines)

**Exports:** `buildAnimationContext()`, `buildAllAnimationContexts()`, `loadRegistry()`
**Requires:** `animation-summarizer.js`
**References artifacts:** `animation-analysis.json`

---

### animation-summarizer.js (210 lines)

**Exports:** `summarizeSection()`, `summarizeAll()`
**Required by:** `animation-injector.js`

---

### archetype-mapper.js (270 lines)

**Exports:** `mapSectionsToArchetypes()`, `loadArchetypes()`
**Required by:** `url-to-preset.js`

---

### asset-downloader.js (258 lines)

**Exports:** `verifyAssets()`, `downloadAssets()`

---

### asset-injector.js (379 lines)

**Exports:** `categorizeImages()`, `buildAssetContext()`, `buildAllAssetContexts()`, `getDownloadManifest()`

---

### design-tokens.js (266 lines)

**Exports:** `collectTokens()`, `collectAnimationTokens()`, `compareToPreset()`, `parsePreset()`, `rgbToHex()`
**Required by:** `enrich-preset.js`, `url-to-preset.js`

---

### extract-reference.js (577 lines)

**Exports:** `extractReference()`
**Requires:** `animation-detector.js`, `gsap-extractor.js`
**Required by:** `enrich-preset.js`, `url-to-brief.js`, `url-to-preset.js`

---

### gsap-extractor.js (455 lines)

**Exports:** `extractGsapFromBundles()`, `mergeGsapData()`
**Required by:** `extract-reference.js`

---

### post-process.js (314 lines)

**Exports:** `cleanComponent()`, `validateComponent()`, `processAllSections()`

---

### section-context.js (193 lines)

**Exports:** `buildSectionContext()`, `buildAllSectionContexts()`

---

### visual-validator.js (402 lines)

**Exports:** `validateBuild()`
**Required by:** `validate-build.js`

---

## Top-Level Scripts

### enrich-preset.js

**Requires:** `extract-reference.js`, `design-tokens.js`

---

### test-animation-detector.js

**Requires:** `animation-detector.js`

---

### url-to-brief.js

**Requires:** `extract-reference.js`

---

### url-to-preset.js

**Requires:** `extract-reference.js`, `design-tokens.js`, `archetype-mapper.js`, `animation-detector.js`

---

### validate-build.js

**Requires:** `visual-validator.js`

---

## orchestrate.py Subprocess Calls

**Calls via subprocess:**
- `animation-injector.js`
- `asset-downloader.js`
- `asset-injector.js`
- `section-context.js`
- `url-to-brief.js`
- `url-to-preset.js`

---

## Pipeline Data Flow Summary

```
extract-reference.js
    ├── extraction-data.json
    │   ├── design-tokens.js → tokens for preset
    │   ├── archetype-mapper.js → mapped-sections.json
    │   ├── animation-detector.js → animation-analysis.json
    │   ├── asset-injector.js → per-section asset context
    │   └── section-context.js → per-section prompt context
    └── screenshots/

animation-detector.js + gsap-extractor.js
    └── animation-analysis.json
        └── animation-injector.js → per-section animation context
            ├── registry.json (component library)
            └── animation-summarizer.js (extracted signatures)

orchestrate.py
    ├── Calls: url-to-preset.js, url-to-brief.js (Stage 0)
    ├── Calls: animation-injector.js, asset-injector.js (Stage 2)
    └── Calls: post-process.js (Stage 2 cleanup)
```
